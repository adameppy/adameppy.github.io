<!DOCTYPE html>
<link id="legacy-zam5nzz" rel="stylesheet" type="text/css" href="https://typeface.nyt.com/css/zam5nzz.css" media="all">
<style>
div.tooltip {
  z-index: 1000;
  position: absolute;
  text-align: left;
  padding: 2px;
  font: 12px sans-serif;
  background: white;
  border: 0px;
  border-radius: 8px;
  pointer-events: none;
}

div.title {
  z-index: 999;
  position: absolute;
  text-align: left;
  padding: 2px;
  font: 12px sans-serif;
  border: 0px;
  border-radius: 8px;
  pointer-events: none;
}

rect :hover {
	fill-opacity: .7;
}

img.player {
  float: left;
}

</style>

<h1 itemprop="headline" id="headline" class="headline" style="visibility: visible; max-width: 881.356px;">The Red Sox Add a Slugger of Their Own, Signing J.D. Martinez</h1>
<p class="byline-dateline"><span class="byline" itemprop="author creator" itemscope="" itemtype="http://schema.org/Person" itemid="https://www.nytimes.com/by/tyler-kepner">By <a href="https://www.nytimes.com/by/tyler-kepner" title="More Articles by TYLER KEPNER"><span class="byline-author" data-byline-name="TYLER KEPNER" itemprop="name" data-twitter-handle="TylerKepner">TYLER KEPNER</span></a></span><time class="dateline" datetime="2018-02-20T01:48:35-05:00" itemprop="dateModified" content="2018-02-20T01:48:35-05:00">FEB. 19, 2018</time>
</p>
<div class="image">
            <img src="https://static01.nyt.com/images/2018/02/20/sports/20martinezweb1/merlin_133536617_11ecc59b-aea8-4f51-9ce3-9a35dbdda253-master768.jpg" alt="" class="media-viewer-candidate" data-mediaviewer-src="https://static01.nyt.com/images/2018/02/20/sports/20martinezweb1/merlin_133536617_11ecc59b-aea8-4f51-9ce3-9a35dbdda253-superJumbo.jpg" data-mediaviewer-caption="J.D. Martinez hit 45 home runs last season, including a four-homer game for the Diamondbacks in September." data-mediaviewer-credit="Mark J. Terrill/Associated Press" itemprop="url" itemid="https://static01.nyt.com/images/2018/02/20/sports/20martinezweb1/merlin_133536617_11ecc59b-aea8-4f51-9ce3-9a35dbdda253-master768.jpg"><div class="media-action-overlay">
<i class="icon sprite-icon"></i>
</div>
            <meta itemprop="height" content="498">
            <meta itemprop="width" content="768">
</div>
<figcaption class="caption" itemprop="caption description">
            <span class="caption-text">J.D. Martinez hit 45 home runs last season, including a four-homer game for the Diamondbacks in September.</span>
                    <span class="credit" itemprop="copyrightHolder">
        <span class="visually-hidden">Credit</span>
        Mark J. Terrill/Associated Press        </span>
</figcaption>
<p class="story-body-text story-content" data-para-count="329" data-total-count="329">It took a while, but the Boston Red Sox have finally countered the Yankees’ biggest acquisition of the off-season. The Red Sox reached an agreement with J.D. Martinez on a five-year, $110 million contract on Monday, bringing the majors’ leader in slugging percentage last season to a revitalized American League East rivalry.</p>
<p class="story-body-text story-content" data-para-count="224" data-total-count="553">The agreement, first reported by Pedro Gomez of ESPN, was confirmed by a person in baseball with direct knowledge of it. The person was granted anonymity because Martinez must first pass a physical to make the deal official.</p>
<p class="story-body-text story-content" data-para-count="255" data-total-count="808">The Yankees added Giancarlo Stanton, the major league leader in homers last season, in a trade with the Miami Marlins in December. But the Red Sox, who have won the division in each of the last two seasons, will soon introduce a player with similar power.</p>
<svg width="960" height="600" id="vis"></svg>
<br />
<button value="salary">Total Salary</button>
<button value="personnel">Personnel</button>
<button value="pwar">Projected WAR</button>
<p class="story-body-text story-content" data-para-count="276" data-total-count="1084">Martinez had a .690 slugging percentage for Detroit and Arizona last season and bashed 45 homers overall, including four in one game for the Diamondbacks. The Red Sox hit only 168 home runs last season, the fewest in the A.L. and 73 fewer than the Yankees, who led the majors.</p>
<p class="story-body-text story-content" data-para-count="341" data-total-count="1425" id="story-continues-1">The Red Sox had offered Martinez five years and $100 million, far less than Martinez had expected after a four-season stretch in which only Mike Trout had a better slugging percentage than his .574 (Stanton had a .573 mark in those seasons). When the Red Sox raised the value of the deal and restructured it, the sides finally came together.</p>
<p class="story-body-text story-content" data-para-count="413" data-total-count="1838" id="story-continues-3">Martinez’s contract will be heavily front-loaded, guaranteeing him $50 million in the first two seasons before the first of two opt-out clauses. The structure is similar to another deal negotiated in recent days by Martinez’s agent, Scott Boras, who matched Eric Hosmer with the San Diego Padres. Hosmer <a href="https://www.nytimes.com/2018/02/18/sports/baseball/eric-hosmer-padres-contract.html">got an eight-year, $144 million deal</a>, but can opt out after earning $110 million in the first five years.</p>
<p class="story-body-text story-content" data-para-count="323" data-total-count="2161">That kind of arrangement could start to catch on, as a way for players to earn high salaries for the years in which they are likely to perform best. If they continue to play well, they could opt out and hit the open market again. If they stay for the full term, their teams would lower salaries for their declining seasons.</p>
<p class="story-body-text story-content" data-para-count="204" data-total-count="2365">Martinez, Hosmer and starter Yu Darvish (<a href="https://www.nytimes.com/2018/02/10/sports/baseball/yu-darvish-chicago-cubs-contract.html">six years, $126 million with the Chicago Cubs</a>) have signed nine-figure contracts in past 10 days, possibly quelling some anxiety within the players’ association.</p>
<p class="story-body-text story-content" data-para-count="366" data-total-count="2731">The union has been furious about a slow-moving free agent market, but with all spring training camps now open for pitchers and position players, more and more free agents are signing every day. As soon as they lost out on Martinez, the Diamondbacks <a href="https://www.azcentral.com/story/sports/mlb/diamondbacks/2018/02/19/arizona-diamondbacks-jarrod-dyson-mlb/353222002/" title="Arizona Republic article on Dyson">reportedly agreed to a two-year deal</a> with the speedy Jarrod Dyson, a much different type of outfielder than Martinez.</p>
<p class="story-body-text story-content" data-para-count="260" data-total-count="2991">In Boston, Martinez will probably get most of his starts as the designated hitter, though he could fill in for an outfielder now and then. The Red Sox expect to use Hanley Ramirez, their regular D.H. last season, in a platoon at first base with Mitch Moreland.</p>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

var sumFunc = sumSalary;

var dataroot;

var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

var fader = function(color) { return d3.interpolateRgb(color, "#fff")(0.2); },
    color = d3.scaleOrdinal(d3.schemeCategory20.map(fader)),
    format = d3.format(",d");

var treemap = d3.treemap()
    .tile(d3.treemapResquarify)
    .size([width, height])
    .round(true)
    .paddingInner(2);

var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

d3.tsv("redsox.tsv", function(d) {
  return {
    name : d.Name,
    position : d.Position,
    age : +d.Age,
    salary : +d.Adjusted,
    status : d.Status,
    war : +d.WAR,
  }
}, function(error, data){
  if (error) throw error;

  var root = d3.stratify()
    .id(function (d) {return d.name; })
    .parentId(function(d) { return d.position;})
    (data);

  root.sum(sumFunc);
  dataroot = root;


  treemap(root);

  var nodes = svg.selectAll('g')
    .data(root.leaves())
    .enter()
    .append('g')
    .attr('transform', function(d) {return 'translate(' + [d.x0, d.y0] + ')'})

  nodes.append('rect')
    .attr('width', function(d) { return d.x1 - d.x0; })
    .attr('height', function(d) { return d.y1 - d.y0; })
    .attr("fill", function(d) { return color(d.parent.data.name); })
    .attr("class", "player")
    .on("mouseover", function(d){
      coordinates = d3.mouse(this);
      var dy = document.getElementById("vis").getBoundingClientRect().y - document.body.getBoundingClientRect().y
      var mouseX = coordinates[0];
      var mouseY = coordinates[1] + dy;
      var name = d.data.name.replace(/\s+/g, '');
      div.transition()
        .duration(200)
        .style("opacity", .9);
      div.html("<h3>" + d.data.name + ", " + d.data.position +"</h3> <br /> <img class='player' src=images/"
       + name + ".png /> Salary: $" + (d.data.salary).formatMoney(0) + "<br /> Age: "
       + d.data.age + "<br /> Status: " + d.data.status + "<br /> Projected WAR: " +
       d.data.war)
        .style("left", (mouseX + d.x0 + 20) + "px")
        .style("top", (mouseY + d.y0 - 28) + "px");

      })
    .on("mouseout", function(f){
      div.transition()
        .duration(500)
        .style("opacity", 0);
      svg.selectAll("line")
      .style("stroke","");
    });

  nodes.append('text')
    .text(function(d) {
      if (d.id == d.parent.children[0].id){
        var lastChild = d.parent.children[d.parent.children.length-1];
        var xC = (d.x0 + lastChild.x1)/2;
        var yC = (d.y0 + lastChild.y1)/2;
        var dy = document.getElementById("vis").getBoundingClientRect().y - document.body.getBoundingClientRect().y
        var div = d3.select("body").append("div")
            .attr("class", "title")
            .attr("id", "div" + d.parent.id)
            .style("left", xC - 10 + "px")
            .style("top", yC - 20 + dy + "px")
            .html("<h1>" + d.parent.id + "</h1>");
      }
    })

    d3.selectAll("button")
      .on("click", function(){
        if (this.value == "salary"){
          changed(sumSalary);
        }else if (this.value == "personnel") {
          changed(sumTotal);
        }else{
          changed(sumWAR);
        }
      });

  //Function prewritten from https://bl.ocks.org/mbostock/4063582
  function changed(sum) {
    treemap(root.sum(sum));
    sumFunc = sum;

    nodes.transition()
        .duration(750)
        .attr("transform", function(d) { return "translate(" + d.x0 + "," + d.y0 + ")"; })
      .select("rect")
        .attr("width", function(d) { return d.x1 - d.x0; })
        .attr("height", function(d) {
          if (d.id == d.parent.children[0].id){
            var lastChild = d.parent.children[d.parent.children.length-1];
            var xC = (d.x0 + lastChild.x1)/2;
            var yC = (d.y0 + lastChild.y1)/2;
            var dy = document.getElementById("vis").getBoundingClientRect().y - document.body.getBoundingClientRect().y
            var div = d3.select("#div" + d.parent.id)
                .transition()
                .duration(750)
                .style("left", xC - 10 + "px")
                .style("top", yC - 20 + dy + "px");
          }
          return d.y1 - d.y0;
        });
  }

});

function sumSalary(d){
  return d.salary;
}

function sumTotal(d){
  return d.age/d.age;
}

function sumWAR(d){
  if (d.war <= 0){return .01;}
  else{
    return d.war;
  }
}

Number.prototype.formatMoney = function(c, d, t){
var n = this,
    c = isNaN(c = Math.abs(c)) ? 2 : c,
    d = d == undefined ? "." : d,
    t = t == undefined ? "," : t,
    s = n < 0 ? "-" : "",
    i = String(parseInt(n = Math.abs(Number(n) || 0).toFixed(c))),
    j = (j = i.length) > 3 ? j % 3 : 0;
   return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
 };


</script>
</html>
